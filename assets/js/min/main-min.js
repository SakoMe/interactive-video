function displayChapters(){if(2==trackElement.readyState&&(textTrack=trackElement.track)&&window.matchMedia("(min-width: 500px)").matches&&"chapters"===textTrack.kind){textTrack.mode="hidden";for(var e=0;e<textTrack.cues.length;++e){var t=textTrack.cues[e],a=t.text,c=t.startTime,r=document.createElement("li"),i=document.createElement("a");i.setAttribute("id",c),i.setAttribute("tabindex","0");var n=document.createTextNode(t.text);i.appendChild(n),r.appendChild(i),locationList.appendChild(r),i.addEventListener("click",function(){video.currentTime=this.id},!1)}textTrack.addEventListener("cuechange",function(){var e=this.activeCues[0].startTime;if(chapter=document.getElementById(e)){for(var t=[].slice.call(document.querySelectorAll("#chapters li a")),a=0;a<t.length;++a)t[a].classList.remove("current");chapter.classList.add("current"),chapter.scrollIntoView()}},!1)}}var locationList=document.getElementById("chapters"),video=document.getElementById("my-video"),trackElement=video.getElementsByTagName("track")[0];video.addEventListener("loadedmetadata",function e(){1==trackElement.readyState?setTimeout(e,0):displayChapters()});